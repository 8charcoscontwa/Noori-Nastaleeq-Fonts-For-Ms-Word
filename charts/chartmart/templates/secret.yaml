apiVersion: v1
kind: Secret
metadata:
  name: chartmart-env
  labels:
{{ include "chartmart.labels" . | indent 4 }}
type: Opaque
data:
  JWT_SECRET: {{ .Values.secrets.jwt | b64enc | quote }}
  SECRET_KEY_BASE: {{ randAlphaNum 10 | b64enc | quote }}
  ERLANG_COOKIE: {{ .Values.secrets.erlang | b64enc | quote }}
---
{{ if .Values.admin.enabled }}
apiVersion: v1
kind: Secret
metadata:
  name: chartmart-migration-env
  labels:
{{ include "chartmart.labels" . | indent 4 }}
type: Opaque
data:
  ADMIN_EMAIL: {{ .Values.admin.email | b64enc | quote }}
  ADMIN_NAME: {{ .Values.admin.name | b64enc | quote }}
  ADMIN_PASSWORD: {{ .Values.admin.password | b64enc | quote }}
  PUBLISHER_NAME: {{ .Values.admin.publisher | b64enc | quote }}
  PUBLISHER_DESCRIPTION: {{ .Values.admin.publisher_description | b64enc | quote }}
{{ end }}